{% extends 'base.html' %}
{% load static %}

{% block metatags %}
	<meta name="robots" content="noindex,nofollow">
{% endblock metatags %}

{% block banner-top %}{% endblock banner-top %}

{% block content %}
    {% block whatsapp-info %}{% endblock %}

    <div class="container-lg gx-1">
        <div class="row">
                
            <section id="sidebar" class="sticky-md-top zindex-10 pt-5 anim-stick align-self-start d-flex flex-md-column flex-wrap col-12 col-md-4 medium text-gray1">
                <a href="{% url 'cart_url' %}" class="flex-grow-1 prof-button text-decoration-none d-block w-md-100 btn border-0 p-3 rounded-3 rounded-sm-md-end-0 bg-light1 prof-btn">سبد خرید</a href="">
                <a href="{% url 'history_url' %}" class="prof-button text-decoration-none d-block w-md-100 flex-grow-1 flex-md-grow-0 btn border-0 mt-2 mt-sm-0 mt-md-2  p-3 rounded-3 rounded-sm-md-0 bg-light1 prof-btnactive">لیست سفارشات</a href="">
                <a href="{% url 'howto_url' %}" class="flex-grow-1 prof-button text-decoration-none d-block w-md-100 btn border-0 mt-2 mt-sm-0 mt-md-2  p-3 rounded-3 rounded-sm-md-start-0 bg-light1 prof-btn">نحوه ی پرداخت و شماره کارت</a href="">
            </section>

            <section id="container" class="col-12 col-md-8 pt-5">
                <div class="text-nowrap d-flex flex-wrap align-items-center">
                    <button data-value="" class="col-6 col-sm-auto orders-filter btn border-0 bold text-black px-3">همه ی سفارشات</button>
                    <div class="hr-t2 col-1 col-sm-auto mx-2"></div>
                    <button data-value="1" class="col-4 col-sm-auto orders-filter btn border-0 bold text-gray6 px-3">جاری</button>
                    <div class="hr-t2 d-none d-sm-inline-block mx-2"></div>
                    <button data-value="2" class="col-6 col-sm-auto orders-filter btn border-0 bold text-gray6 px-3">تحویل داده شده</button>
                    <div class="hr-t2 col-1 col-sm-auto mx-2"></div>
                    <button data-value="3" class="col-4 col-sm-auto orders-filter btn border-0 bold text-gray6 px-3">لغو شده</button>
                </div>
                
                <div id="cItems">
                    {% for cart in page_obj %}
                        <div class="d-flex flex-md-column rounded-4 px-md-4 py-md-2 bg-white border-t1 bold mb-1 mt-3">
                            {% with status=cart.status %}
                                {% if status == '1' %}
                                    <div class="border-green1 bg-green1 col-6 col-sm-4 col-md-12 rounded-start-4 rounded-md-3 overflow-hidden position-relative d-flex flex-column justify-content-center justify-content-md-end flex-md-row row-cols-auto align-items-center text-white px-3 px-md-2 py-1 order-1 order-md-0">
                                        <svg class="icon-mobile" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1.01272 11.9195L0.0190286 12.0317L1.01272 11.9195C1.02538 12.0317 1.04017 12.0984 1.10073 12.3524C2.75599 19.294 8.63623 21.9135 11.1562 22.7299C11.5879 22.8698 11.6901 22.9009 12 22.9009C12.3099 22.9009 12.4121 22.8698 12.8438 22.7299C15.3638 21.9135 21.244 19.294 22.8993 12.3524C22.9598 12.0984 22.9746 12.0317 22.9873 11.9195C22.9997 11.8098 23.0002 11.7239 22.9973 11.4102C22.9533 6.70449 22.3475 4.2723 20.9089 2.9142C19.4531 1.5397 16.8733 0.999999 12 0.999999C7.1267 0.999999 4.54693 1.53969 3.09106 2.9142C1.65255 4.2723 1.04666 6.70448 1.00268 11.4102C0.999753 11.7239 1.00034 11.8098 1.01272 11.9195Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.7071 9.70711C17.0976 9.31658 17.0976 8.68342 16.7071 8.29289C16.3166 7.90237 15.6834 7.90237 15.2929 8.29289L11 12.5858L9.70711 11.2929C9.31658 10.9024 8.68342 10.9024 8.29289 11.2929C7.90237 11.6834 7.90237 12.3166 8.29289 12.7071L10.2929 14.7071C10.6834 15.0976 11.3166 15.0976 11.7071 14.7071L16.7071 9.70711Z" fill="white"/>
                                        </svg>
                                        <span class="me-2 text-center mt-3 mt-md-0 mb-5 mb-md-0">جاری</span>
                                        <span class="text-center fs-small px-2 py-1 border-0 border-md-green bg-green3 bg-md-transparent rounded-0 rounded-md-3 position-absolute bottom-0 right-0 left-0 w-100 w-md-auto position-md-static me-auto">کد سفارش : {{cart.id}}</span>
                                    </div>
                                {% elif status == '2' %}
                                    <div class="border-yellow1 bg-yellow2 col-6 col-sm-4 col-md-12 rounded-start-4 rounded-md-3 overflow-hidden position-relative d-flex flex-column justify-content-center justify-content-md-end flex-md-row row-cols-auto align-items-center text-white px-3 px-md-2 py-1 order-1 order-md-0">
                                        <svg class="icon-mobile" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1.01272 11.9195L0.0190286 12.0317L1.01272 11.9195C1.02538 12.0317 1.04017 12.0984 1.10073 12.3524C2.75599 19.294 8.63623 21.9135 11.1562 22.7299C11.5879 22.8698 11.6901 22.9009 12 22.9009C12.3099 22.9009 12.4121 22.8698 12.8438 22.7299C15.3638 21.9135 21.244 19.294 22.8993 12.3524C22.9598 12.0984 22.9746 12.0317 22.9873 11.9195C22.9997 11.8098 23.0002 11.7239 22.9973 11.4102C22.9533 6.70449 22.3475 4.2723 20.9089 2.9142C19.4531 1.5397 16.8733 0.999999 12 0.999999C7.1267 0.999999 4.54693 1.53969 3.09106 2.9142C1.65255 4.2723 1.04666 6.70448 1.00268 11.4102C0.999753 11.7239 1.00034 11.8098 1.01272 11.9195Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.7071 9.70711C17.0976 9.31658 17.0976 8.68342 16.7071 8.29289C16.3166 7.90237 15.6834 7.90237 15.2929 8.29289L11 12.5858L9.70711 11.2929C9.31658 10.9024 8.68342 10.9024 8.29289 11.2929C7.90237 11.6834 7.90237 12.3166 8.29289 12.7071L10.2929 14.7071C10.6834 15.0976 11.3166 15.0976 11.7071 14.7071L16.7071 9.70711Z" fill="white"/>
                                        </svg>
                                        <span class="me-2 text-center mt-3 mt-md-0 mb-5 mb-md-0">تحویل داده شده</span>
                                        <span class="text-center fs-small px-2 py-1 border-0 border-md-yellow bg-yellow3 bg-md-transparent rounded-0 rounded-md-3 position-absolute bottom-0 right-0 left-0 w-100 w-md-auto position-md-static me-auto">کد سفارش : {{cart.id}}</span>
                                    </div>
                                {% elif status == '3' %}
                                    <div class="border-red1 bg-red1 col-6 col-sm-4 col-md-12 rounded-start-4 rounded-md-3 overflow-hidden position-relative d-flex flex-column justify-content-center justify-content-md-end flex-md-row row-cols-auto align-items-center text-white px-3 px-md-2 py-1 order-1 order-md-0">
                                        <svg class="icon-mobile" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1.01272 11.9195L0.0190286 12.0317L1.01272 11.9195C1.02538 12.0317 1.04017 12.0984 1.10073 12.3524C2.75599 19.294 8.63623 21.9135 11.1562 22.7299C11.5879 22.8698 11.6901 22.9009 12 22.9009C12.3099 22.9009 12.4121 22.8698 12.8438 22.7299C15.3638 21.9135 21.244 19.294 22.8993 12.3524C22.9598 12.0984 22.9746 12.0317 22.9873 11.9195C22.9997 11.8098 23.0002 11.7239 22.9973 11.4102C22.9533 6.70449 22.3475 4.2723 20.9089 2.9142C19.4531 1.5397 16.8733 0.999999 12 0.999999C7.1267 0.999999 4.54693 1.53969 3.09106 2.9142C1.65255 4.2723 1.04666 6.70448 1.00268 11.4102C0.999753 11.7239 1.00034 11.8098 1.01272 11.9195Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.7071 9.70711C17.0976 9.31658 17.0976 8.68342 16.7071 8.29289C16.3166 7.90237 15.6834 7.90237 15.2929 8.29289L11 12.5858L9.70711 11.2929C9.31658 10.9024 8.68342 10.9024 8.29289 11.2929C7.90237 11.6834 7.90237 12.3166 8.29289 12.7071L10.2929 14.7071C10.6834 15.0976 11.3166 15.0976 11.7071 14.7071L16.7071 9.70711Z" fill="white"/>
                                        </svg>
                                        <span class="me-2 text-center mt-3 mt-md-0 mb-5 mb-md-0">لغو شده</span>
                                        <span class="text-center fs-small px-2 py-1 border-0 border-md-red bg-red3 bg-md-transparent rounded-0 rounded-md-3 position-absolute bottom-0 right-0 left-0 w-100 w-md-auto position-md-static me-auto">کد سفارش : {{cart.id}}</span>
                                    </div>
                                {% endif %}
                            {% endwith %}
                            
                            <div class="col-6 col-sm-8 flex-shrink-0 col-md-12 d-flex flex-column-reverse flex-md-column">
                                <div class="responsive6 px-3 pb-2" data-count="{{cart.cart_items.count}}">
                                    {% for item in cart.cart_items.all %}
                                        <div class="px-2">
                                            <a href="{% url 'detail_url' item.post.slug %}" class="btn p-0 text-decoration-none position-relative overflow-hidden rounded-4 img-small-wrapper img-small-wrapper-e2 mt-3">
                                                <img class="img-cover w-100 h-100" data-src="{{item.post.image1.url}}" alt="{{item.post.title}}">
                                                <span class="position-absolute bottom-0 start-0 end-0 end-md-auto text-center f-smaller text-gray3 px-2 py-md-1 bg-yellow1">{{item.quantity}} عدد</span>
                                            </a>
                                        </div>
                                    {% endfor %}
                                </div>
                                <div class="text-gray7 f-smaller mt-3 pe-2">{{cart.jpublish}}</div>
                            </div>
                        </div>
                    {% endfor %}
                    {% if not page_obj %}
                        <img class="d-block mx-auto img404 mt-3" data-src="{% static 'icon/task-list.png' %}" alt="404 not found">
                        <div class="h5 semibold text-gray4 text-center mt-4">هنوز هیچ سفارشی ندادید</div>
                    {% endif %}
                </div>

                <div id="paginateButtons" class="row row-cols-auto justify-content-center">
                    {% if page_obj.has_next %}
                      <button data-value="" data-page="{{page_obj.next_page_number}}" type="button" class="btn p-0 border-0 bg-blue1 text-white rounded-4 mx-2 mt-3 px-2 py-1">بعدی »</button>
                    {% endif %}
                    {% if page_obj.has_previous %}
                      <button data-value="" data-page="{{page_obj.previous_page_number}}" type="button" class="btn p-0 border-0 bg-blue1 text-white rounded-4 mx-2 mt-3 px-2 py-1">« قبلی</button>
                    {% endif %}
                </div>

            </section>

        </div>
    </div>
{% endblock content %}

{% block scripts %}
	{{ block.super }}

	<script src="{% static 'accounts/js/res-slider.js' %}"></script>
	<script src="{% static 'accounts/js/stick-scroll.js' %}"></script>
	<script src="{% static 'accounts/js/orders-filter.js' %}"></script>
    <script>
        const container = $('#container');
		const offset_top = $('#container').offset().top - 50;
		if ($(window).width() < 576) {
            $('body').animate({'scrollTop': offset_top}, 500, 'swing');
        }
        const url = '{% url "history_url" %}'
        const img404 = "{% static 'icon/task-list.png' %}" 
    </script>
{% endblock scripts %}
